<!doctype html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<link rel="apple-touch-icon" sizes="76x76" href="zfx/assets/img/apple-icon.png" />
	<link rel="icon" type="image/png" href="zfx/assets/img/favicon.png" />
	<title></title>

	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />
    <meta name="viewport" content="width=device-width" />

	<!-- CSS Files -->
    <link href="zfx/assets/css/bootstrap.min.css" rel="stylesheet" />
	<link href="zfx/assets/css/paper-bootstrap-wizard.css" rel="stylesheet" />

	<!-- CSS Just for demo purpose, don't include it in your project -->
	<link href="zfx/assets/css/demo.css" rel="stylesheet" />

	<!-- Fonts and Icons -->
    <link href="http://netdna.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.css" rel="stylesheet">
	<link href='https://fonts.googleapis.com/css?family=Muli:400,300' rel='stylesheet' type='text/css'>
	<link href="zfx/assets/css/themify-icons.css" rel="stylesheet">
</head>

<body>
	<div class="image-container set-full-height" style="background-image: url('zfx/assets/img/paper-2.jpeg')">
	    <!--   Creative Tim Branding   -->
	    <a href="#">
	         <div class="logo-container">
	            <div class="logo">
	                <img src="zfx/assets/img/new_logo.png">
	            </div>
	            <div class="brand">
	                Creative Tim
	            </div>
	        </div>
	    </a>

		<!--  Made With Paper Kit  -->
		<a href="#/paper-kit?ref=paper-bootstrap-wizard" class="made-with-pk">
			<div class="brand">PK</div>
			<div class="made-with">Made with <strong>Paper Kit</strong></div>
		</a>

	    <!--   Big container   -->
	    <div class="container">
	        <div class="row">
		        <div class="col-sm-8 col-sm-offset-2">

		            <!--      Wizard container        -->
		            <div class="wizard-container">
		                <div class="card wizard-card" data-color="green" id="wizard">
		                <form id="form" action="http://localhost:8080/Declaration/adddeclaration" method="POST" enctype="multipart/form-data">
		                <!--        You can switch " data-color="green" "  with one of the next bright colors: "blue", "azure", "orange", "red"       -->

		                    	<div class="wizard-header">
		                        	<h3 class="wizard-title">填写申请信息</h3>
		                        	<p class="category">This information will let us know more about your project.</p>
		                    	</div>
								<div class="wizard-navigation">
									<div class="progress-with-circle">
									    <div class="progress-bar" role="progressbar" aria-valuenow="1" aria-valuemin="1" aria-valuemax="4" style="width: 15%;"></div>
									</div>
									<ul>
			                            <li>
											<a href="#location" data-toggle="tab">
												<div class="icon-circle">
													<i class="ti-map"></i>
												</div>
												Project info
											</a>
										</li>
			                            <li>
											<a href="#type" data-toggle="tab">
												<div class="icon-circle">
													<i class="ti-direction-alt"></i>
												</div>
												Type
											</a>
										</li>
			                            <li>
											<a href="#facilities" data-toggle="tab">
												<div class="icon-circle">
													<i class="ti-panel"></i>
												</div>
												Facilities
											</a>
										</li>
			                            <li>
											<a href="#description" data-toggle="tab">
												<div class="icon-circle">
													<i class="ti-comments"></i>
												</div>
												Comments
											</a>
										</li>
			                        </ul>
								</div>
		                        <div class="tab-content">
		                            <div class="tab-pane" id="location">
		                            	<div class="row">
		                                	<div class="col-sm-12">
		                                    	<h5 class="info-text"> Let's start with the basic details</h5>
		                            		</div>
		                                	<div class="col-sm-5 col-sm-offset-1">
		                                    	<div class="form-group">
		                                        	<label>项目负责人</label>
		                                        	<input type="text" class="form-control" name="username" id="exampleInputEmail1" placeholder="enter your name">
		                                    	</div>
		                                	</div>
		                                	<div class="col-sm-5">
		                                    	<div class="form-group">
		                                            <label>Project</label><br>
		                                            <select name="country" class="form-control" id="awardtyp">
		                                                <option disabled="" selected="">- project -</option>
<!--		                                                <option value="Afghanistan"> 团队 </option>-->
<!--		                                                <option value="Albania"> 个人 </option>-->

		                                                <option value="...">...</option>
		                                            </select>
		                                        </div>
		                                	</div>
		                                	<!-- <div class="col-sm-5 col-sm-offset-1">
		                                    	<div class="form-group">
		                                        	<label>Accommodates</label>
		                                        	<select class="form-control">
			                                            <option disabled="" selected="">- persons -</option>
			                                            <option>1 Person</option>
			                                            <option>2 Persons </option>
			                                            <option>3 Persons</option>
			                                            <option>4 Persons</option>
			                                            <option>5 Persons</option>
			                                            <option>6+ Persons</option>
		                                        	</select>
		                                    	</div>
											</div> -->
											<div class="col-sm-5 col-sm-offset-1">
		                                    	<div class="form-group">
		                                        	<label>电话</label>
		                                        	<input type="text" class="form-control" name="phone" id="exampleInputEmail1" placeholder="enter your phone number">
		                                    	</div>
		                                	</div>
		                                	<div class="col-sm-5">
		                                    	<div class="form-group">
		                                        	<label>email</label>
		                                        	<div class="input-group">
		                                            	<input type="text" name="email" class="form-control" placeholder="enter your email">
		                                            	<span class="input-group-addon"></span>
		                                        	</div>
		                                    	</div>
		                                	</div>
		                            	</div>
		                            </div>
		                            <div class="tab-pane" id="type">
		                                <h5 class="info-text">What is your type of competition？ </h5>
		                                <div class="row">
		                                    <div class="col-sm-8 col-sm-offset-2">
		                                        <div class="col-sm-4 col-sm-offset-2">
													<div class="choice" data-toggle="wizard-checkbox">
		                                                <input type="checkbox" name="jobb" value="Design">
		                                                <div class="card card-checkboxes card-hover-effect">
		                                                    <i class="ti-home"></i>
															<p>Personal</p>
		                                                </div>
		                                            </div>
		                                        </div>
		                                        <div class="col-sm-4">
													<div class="choice" data-toggle="wizard-checkbox">
		                                                <input type="checkbox" name="jobb" value="Design">
		                                                <div class="card card-checkboxes card-hover-effect">
		                                                    <i class="ti-package"></i>
															<p>Group</p>
		                                                </div>
		                                            </div>
		                                        </div>
		                                    </div>
		                                </div>
		                            </div>
		                            <div class="tab-pane" id="facilities">
		                                <h5 class="info-text">Tell us more about competition. </h5>
		                                <div class="row">
		                                    <div class="col-sm-5 col-sm-offset-1">
		                                    	<div class="form-group">
		                                        	<label>Which award </label>
		                                        	<select name="awardid" class="form-control" id="award">
			                                            <option disabled="" selected="">- type -</option>
		                                        	</select>
		                                    	</div>
		                                    </div>
		                                    <div class="col-sm-5">
		                                    	<div class="form-group">
		                                        	<label>choose your project</label>
		                                        	<select name="projectid" class="form-control" id="awardtype">
			                                            <option disabled="" selected="">- response -</option>
		                                        	</select>
		                                    	</div>
		                                    </div>
		                                    <div class="col-sm-5 col-sm-offset-1">
		                                    	<div class="form-group">
		                                        	<label>Does your place have wi-fi?</label>
		                                        	<select class="form-control">
			                                            <option disabled="" selected="">- response -</option>
			                                            <option>Yes</option>
			                                            <option>No </option>
		                                        	</select>
		                                    	</div>
		                                    </div>
		                                    <div class="col-sm-5">
		                                    	<div class="form-group">
		                                        	<label>Is breakfast included?</label>
		                                        	<select class="form-control">
			                                            <option disabled="" selected="">- response -</option>
			                                            <option>Yes</option>
			                                            <option>No </option>
		                                        	</select>
		                                    	</div>
		                                    </div>
		                                </div>
		                            </div>
		                            <div class="tab-pane" id="description">
		                                <div class="row">
											<h5  class="info-text"><a href="download">下载申报表</a> </h5>

											<div class="info-text"> <p ><input name="file" class="info-text" id="file" type="file" ></p><a href="javascript:uploads()">upload</a></div>

										</div>
<!--											<div class="info-text"> <p ><input name="file" class="info-text" type="file"/></p></div>-->

		                                    <div class="col-sm-6 col-sm-offset-1">
		                                        <div class="form-group">
		                                            <label>Place description</label>
		                                            <textarea class="form-control" placeholder="" rows="4"></textarea>
		                                        </div>
		                                    </div>
		                                    <div class="col-sm-4">
		                                        <div class="form-group">
		                                            <label>Example</label>
		                                            <p class="description">"The place is really nice. We use it every sunday when we go fishing. It is so awesome."</p>
		                                        </div>
		                                    </div>
		                                </div>
		                            </div>
		                        </div>
		                        <div class="wizard-footer">
	                            	<div class="pull-right">
	                                    <input type='button' class='btn btn-next btn-fill btn-success btn-wd' name='next' value='Next' />
	                                    <input type="button" th:onclick="getFormJson([[${session.id}]])" class='btn btn-finish btn-fill btn-success btn-wd' name='finish' value='Finish' />
									</div>

	                                <div class="pull-left">
	                                    <input type='button' class='btn btn-previous btn-default btn-wd' name='previous' value='Previous' />
	                                </div>
	                                <div class="clearfix"></div>
		                        </div>
		                    </form>
		                </div>
		            </div> <!-- wizard container -->
		        </div>
	        </div> <!-- row -->
	    </div> <!--  big container -->

	    <div class="footer">
	        <div class="container text-center">
	             Copyright &copy; 2017.Company name All rights reserved.<a target="_blank" href="http://sc.chinaz.com/moban/">&#x7F51;&#x9875;&#x6A21;&#x677F;</a>
	        </div>
	    </div>
	</div>

</body>
<script src="lzy/assets/vendor/jquery/jquery.min.js"></script>
<script src="lzy/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="lzy/assets/vendor/jquery.easing/jquery.easing.min.js"></script>
<script src="lzy/assets/vendor/php-email-form/validate.js"></script>
<script src="lzy/assets/vendor/waypoints/jquery.waypoints.min.js"></script>
<script src="lzy/assets/vendor/counterup/counterup.min.js"></script>
<script src="lzy/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
<script src="lzy/assets/vendor/venobox/venobox.min.js"></script>
<script src="lzy/assets/vendor/owl.carousel/owl.carousel.min.js"></script>
<script src="lzy/assets/vendor/aos/aos.js"></script>

<!-- Template Main JS File -->
<script src="lzy/assets/js/main.js"></script>

<script th:inline="javascript">
	var awards;
	var projects;
	$(function(){
		$.ajax({
			type:"GET",
			url:"Award/getallaward",
			success(data){
				awards=data;
				setTimeout(() => {
					var list=document.getElementById("award");
					for (var i=0;i<awards.length;i++){
						$("#award").append("<option value='Value'>"+awards[i].name+"</option>");  //为Select追加一个Option(下拉项)
						//闭包
					}
				}, 1);
				$.ajax({
					url:"Project/findbyower?id="+[[${id}]],
					type:"GET",
					success(res){
						projects=res;
						setTimeout(() => {
							var list=document.getElementById("awardtype");
							for (var i=0;i<projects.length;i++){
								$("#awardtype").append("<option value='Value'>"+projects[i].name+"</option>");  //为Select追加一个Option(下拉项)
								//闭包
							}
						}, 1);
					}
				})
			}
		})
		console.log(awards)

	});


</script>
<script>

	var awards;
	function getFormJson(id) {
		var arry = $("#form").serializeArray(); //form的Id
		var FormJson= {};//分配内存空间
		for (var i = 0; i < arry.length; i++) {
		FormJson[arry[i].name] = arry[i].value;
		}
		FormJson["accessory"]=accessoryid;
		var data= JSON.stringify(FormJson)
		console.log(FormJson)
		$.ajax({
			type:"POST",
			contentType: "application/json;charset=UTF-8",
			url:"http://localhost:8080/Declaration/adddeclaration",
			data:data,
			dataType:"json",
			success(res){
				alert("success")
			}
		})
		alert("创建成功")
		location.href = "user_index?id="+id






}

</script>
	<!--   Core JS Files   -->
	<script src="zfx/assets/js/jquery-2.2.4.min.js" type="text/javascript"></script>
	<script src="zfx/assets/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="zfx/assets/js/jquery.bootstrap.wizard.js" type="text/javascript"></script>

	<!--  Plugin for the Wizard -->
	<script src="zfx/assets/js/paper-bootstrap-wizard.js" type="text/javascript"></script>

	<!--  More information about jquery.validate here: http://jqueryvalidation.org/	 -->
	<script src="zfx/assets/js/jquery.validate.min.js" type="text/javascript"></script>
<script>
var accessoryid;
	function uploads(){
		var formData=new FormData();
		formData.append("file", $('#file')[0].files[0]);

		$.ajax({
			type:"POST",
			url:"Accessory/upload",
			data: formData,
			// url:"[[@{/Accessory/upload}]]",
			processData: false, //因为data值是FormData对象，不需要对数据做处理。
			contentType: false,
			success(res){
				accessoryid=res;
				alert(accessoryid)
			}
		})
	}

</script>
</html>
